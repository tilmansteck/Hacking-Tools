import os
import platform
import threading
import random
import time


def win_encrypt():
    for file in os.listdir("C:/Users/" + os.getlogin() + "/Desktop/encrypt/"):
        try:
            os.rename("C:/Users/" + os.getlogin() + "/Desktop/encrypt/" + str(file),
                      "C:/Users/" + os.getlogin() + "/Desktop/encrypt/" + str(file) + ".hack")
            print(str(file) + str(random.randint(1, 100000)) + " | ENCRYPTED")
            continue

        except FileExistsError:
            continue

    print("done")


def linux_encrypt():
    for file in os.listdir("/home/tilman_steck/PythonProgrammTest/encrypt/"):
        try:
            os.rename("/home/tilman_steck/PythonProgrammTest/encrypt/" + str(file),
                      "/home/tilman_steck/PythonProgrammTest/encrypt/" + str(file) + ".hack")

            print(time.strftime("%H:%M:%S") + " [INFO] " + str(file) + str(random.randint(1, 100000)) + " | ENCRYPTED")
            continue

        except FileExistsError:
            continue

    print("\n\n" + time.strftime("%H:%M:%S") + " [INFO] Encryption done!")


current_sys = platform.system()

if current_sys == "Windows":
    t = threading.Thread(target=win_encrypt)
    t.start()

elif current_sys == "Linux":
    t = threading.Thread(target=linux_encrypt)
    t.start()

else:
    print(time.strftime("%H:%M:%S") + " [INFO] '" + current_sys + "' is your current operating system")
    print(time.strftime("%H:%M:%S") + " [ERROR] This operating system is not supported!")
    exit()


# systempfade anpassen!